function h(t,e,s,l,o,r,c,u){var i=typeof t=="function"?t.options:t;e&&(i.render=e,i.staticRenderFns=s,i._compiled=!0),l&&(i.functional=!0),r&&(i._scopeId="data-v-"+r);var n;if(c?(n=function(a){a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!a&&typeof __VUE_SSR_CONTEXT__<"u"&&(a=__VUE_SSR_CONTEXT__),o&&o.call(this,a),a&&a._registeredComponents&&a._registeredComponents.add(c)},i._ssrRegister=n):o&&(n=u?function(){o.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:o),n)if(i.functional){i._injectStyles=n;var _=i.render;i.render=function(f,p){return n.call(p),_(f,p)}}else{var d=i.beforeCreate;i.beforeCreate=d?[].concat(d,n):[n]}return{exports:t,options:i}}const v={props:["collections","fileTypes","fieldHandles","userFieldHandles"],data(){return{type:"collections",collectionHandle:null,fileType:"xlsx",headers:!0,excludedFields:[],errors:{},loading:!1}},computed:{collectionOptions(){return this.collections.map(t=>({label:t.title,value:t.handle}))},fileTypeOptions(){return this.fileTypes.map(t=>({label:t.toUpperCase(),value:t}))},fieldHandlesForSelectedType(){return this.type==="users"?this.userFieldHandles||[]:this.fieldHandles[this.collectionHandle]||[]}},methods:{submit(){this.loading=!0,this.errors={},fetch("/!/statamic-export/export",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('input[name="_token"]').value},body:JSON.stringify({type:this.type,collection_handle:this.collectionHandle,file_type:this.fileType,excluded_fields:this.excludedFields,headers:this.headers})}).then(t=>t.ok?t.blob():t.json().then(e=>Promise.reject(e))).then(t=>{const e=window.URL.createObjectURL(t),s=document.createElement("a");s.href=e,s.download=`${this.type==="users"?"users":this.collectionHandle}.${this.fileType}`,document.body.appendChild(s),s.click(),s.remove()}).catch(t=>this.errors=t.errors).finally(()=>this.loading=!1)},typeChanged(){this.excludedFields=[]}}};var m=function(){var e=this,s=e._self._c;return s("div",[e._m(0),s("div",{staticClass:"card"},[s("form",{on:{submit:function(l){return l.preventDefault(),e.submit.apply(null,arguments)}}},[e._t("csrf"),s("div",{staticClass:"mb-4"},[e._m(1),s("div",{staticClass:"button-group-fieldtype-wrapper"},[s("div",{staticClass:"btn-group"},e._l([{value:"collections",label:"Collections"},{value:"users",label:"Users"}],function(l){return s("button",{key:l.value,staticClass:"btn px-4",class:{active:e.type===l.value},attrs:{type:"button"},on:{click:function(o){e.type=l.value,e.typeChanged()}}},[e._v(" "+e._s(l.label)+" ")])}),0)])]),e.type==="collections"?s("div",{staticClass:"select-input-container mb-4"},[e._m(2),s("select-input",{attrs:{options:e.collectionOptions,id:"collection_handle"},model:{value:e.collectionHandle,callback:function(l){e.collectionHandle=l},expression:"collectionHandle"}}),e.errors.collection_handle?s("p",{staticClass:"text-red-500 text-xs mt-1"},[e._v(" "+e._s(e.errors.collection_handle[0])+" ")]):e._e()],1):e._e(),s("div",{staticClass:"select-input-container mb-4"},[e._m(3),s("select-input",{staticStyle:{"min-width":"150px"},attrs:{options:e.fileTypeOptions,id:"file_type"},model:{value:e.fileType,callback:function(l){e.fileType=l},expression:"fileType"}}),e.errors.file_type?s("p",{staticClass:"text-red-500 text-xs mt-1"},[e._v(" "+e._s(e.errors.file_type[0])+" ")]):e._e()],1),s("div",{staticClass:"select-input-container mb-4"},[e._m(4),s("v-select",{attrs:{id:"excluded_fields",multiple:!0,disabled:e.fieldHandlesForSelectedType.length===0,options:e.fieldHandlesForSelectedType},model:{value:e.excludedFields,callback:function(l){e.excludedFields=l},expression:"excludedFields"}})],1),s("div",{staticClass:"mb-4",staticStyle:{"min-width":"150px"}},[s("label",{attrs:{for:"headers"}},[e._m(5),s("toggle-input",{attrs:{id:"headers"},model:{value:e.headers,callback:function(l){e.headers=l},expression:"headers"}})],1)]),s("div",{staticClass:"flex"},[s("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:e.loading||e.type==="collections"&&!e.collectionHandle}},[e._v(" "+e._s(e.__(`Export ${e.type==="users"?"users":"collection"}`))+" ")]),e.loading?s("loading-graphic",{staticClass:"ml-4",attrs:{inline:""}}):e._e()],1)],2)])])},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-6"},[e("h1",{staticClass:"mb-2"},[t._v("Export")]),e("p",{staticClass:"text-sm text-gray"},[t._v(" Choose what you'd like to export, pick your preferred file type and you're ready to go. It really is that easy. ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap"},[t._v("Export Type")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v("Choose what you want to export.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"collection_handle"}},[t._v("Collection")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v("Select the collection you want to export.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"file_type"}},[t._v("File Type")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v("Select the file type for the export.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"excluded_fields"}},[t._v("Excluded Fields")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v(" Select the fields you want to exclude from the export. If you don't select any fields, all fields will be included. ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"headers"}},[t._v("Include Headers")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v(" Add a header row as the first row of your exported file which contains the display names of the field for each column. ")])])}],C=h(v,m,y,!1,null,null,null,null);const b=C.exports;Statamic.booting(()=>{Statamic.$components.register("export",b)});
